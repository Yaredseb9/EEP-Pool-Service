(self.webpackChunknote=self.webpackChunknote||[]).push([[313],{17313:function(e,t,r){"use strict";r.r(t),r.d(t,{OwnerModule:function(){return C}});var s=r(61116),n=r(49437),o=r(31041),i=r(87368),a=r(8361),l=r(65916),p=r(28451),u=r(94217),d=r(49783),g=r(14313),c=r(23625),h=r(5590),m=r(13682),Z=r(60649);function w(e,t){1&e&&(i.TgZ(0,"tr",24),i.TgZ(1,"th"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"th"),i._uU(5),i.ALo(6,"translate"),i.qZA(),i.TgZ(7,"th"),i._uU(8),i.ALo(9,"translate"),i.qZA(),i.TgZ(10,"th"),i._uU(11),i.ALo(12,"translate"),i.qZA(),i.TgZ(13,"th"),i._uU(14),i.ALo(15,"translate"),i.qZA(),i.TgZ(16,"th"),i._uU(17),i.ALo(18,"translate"),i.qZA(),i.qZA()),2&e&&(i.xp6(2),i.Oqu(i.lcZ(3,6,"name")),i.xp6(3),i.Oqu(i.lcZ(6,8,"type")),i.xp6(3),i.Oqu(i.lcZ(9,10,"phone")),i.xp6(3),i.Oqu(i.lcZ(12,12,"address")),i.xp6(3),i.Oqu(i.lcZ(15,14,"numBus")),i.xp6(3),i.Oqu(i.lcZ(18,16,"update")))}function f(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"tr",25),i.TgZ(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td"),i._uU(4),i.qZA(),i.TgZ(5,"td"),i._uU(6),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td"),i.TgZ(12,"button",26),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().update(t)}),i.ALo(13,"translate"),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(2),i.Oqu(e.owner.name),i.xp6(2),i.Oqu(e.owner.type),i.xp6(2),i.Oqu(e.owner.phone),i.xp6(2),i.Oqu(e.owner.address),i.xp6(2),i.Oqu(e.noBus),i.xp6(2),i.s9C("label",i.lcZ(13,6,"update"))}}function q(e,t){1&e&&i._UZ(0,"p-message",27)}function b(e,t){1&e&&i._UZ(0,"p-message",31)}function A(e,t){1&e&&i._UZ(0,"p-message",32)}function T(e,t){if(1&e&&(i.TgZ(0,"div",28),i.YNc(1,b,1,0,"p-message",29),i.YNc(2,A,1,0,"p-message",30),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",e.userform.controls.phoneNumber.errors.required),i.xp6(1),i.Q6J("ngIf",e.userform.controls.phoneNumber.errors.pattern)}}const y=function(){return{width:"50vw"}},O=function(){return{width:"30vw"}},x=[{path:"",component:(()=>{class e{constructor(e,t){this.poolService=e,this.fb=t,this.registerOwner=!1,this.updateOwner=!1,this.newOwner={name:"",type:"",phone:"",address:""},this.iserror=!1,this.responseTitle="",this.responseDialog=!1,this.responseMesssage="",this.responseStyle="",this.states=[{name:"Government",value:"Government"},{name:"Private",value:"private"}],this.mobNumberPattern="^((\\+251-?)|0)?[0-9]{10}$"}ngOnInit(){this.loading=!1,this.display=!1,this.getOwner(),this.userform=this.fb.group({name:new o.NI("",o.kI.required),address:new o.NI("",o.kI.required),type:new o.NI("",o.kI.required),phoneNumber:new o.NI("",[o.kI.required,o.kI.pattern(this.mobNumberPattern)])})}getOwner(){this.loading=!0,this.poolService.getOwnerWithbus().then(e=>{this.owner=e.ownerReport,this.loading=!1})}register(){this.userform.reset(),this.display=!0,this.registerOwner=!0,this.updateOwner=!1,this.dialogTitle="registerOwnerForm"}update(e){this.registerOwner=!1,this.updateOwner=!0,this.dialogTitle="updateOwnerForm",this.display=!0,this.organiizationId=e.owner.ownerId,this.newOwner.address=e.owner.address,this.newOwner.name=e.owner.name,this.newOwner.phone=e.owner.phone,this.newOwner.type=e.owner.type,this.selectedType=this.states.filter(t=>t.name==e.owner.type)[0]}onClickRegisterOwner(){this.registerOwner?this.poolService.RegisterOwner(this.owners).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="owner information Registered successfully ",this.display=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,r]of Object.entries(e))this.responseMesssage=this.responseMesssage+r}):this.updateOwner&&this.poolService.updateOwner(this.owners,this.organiizationId).subscribe(e=>{this.iserror=!1,this.responseStyle="success",this.responseDialog=!0,this.responseTitle="SUCCESS!!!",this.responseMesssage="owner information Updated successfully ",this.display=!1},e=>{this.iserror=!0,this.responseTitle="Error!!!",this.responseDialog=!0,this.responseMesssage="",this.display=!1,this.responseStyle="error";for(const[t,r]of Object.entries(e))this.responseMesssage=this.responseMesssage+r})}get owners(){return this.newOwner.name=this.userform.controls.name.value,this.newOwner.phone=this.userform.controls.phoneNumber.value,this.newOwner.type=this.selectedType.name,this.newOwner.address=this.userform.controls.address.value,this.newOwner}Okonclick(){this.responseDialog=!1,location.reload()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(a.q),i.Y36(o.qu))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-owner"]],decls:48,vars:60,consts:[[3,"visible","modal","visibleChange"],["type","button","pButton","","icon","pi pi-check",3,"label","click"],[2,"text-align","right"],["pButton","","type","button",1,"p-button-success",3,"label","click"],["styleClass","p-datatable-gridlines",3,"value","paginator","rows","autoLayout","loading"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","transitionOptions","modal","visibleChange"],[3,"formGroup","ngSubmit"],[1,"p-fluid","p-formgrid","p-grid"],[1,"p-field","p-col-12","p-md-12"],["for","firstname"],["id","firstname","type","text","formControlName","name","pInputText","","required","",3,"ngModel","ngModelChange"],["severity","error","text","Name is required",4,"ngIf"],["inputId","type","formControlName","type","placeholder","Select","optionLabel","name","required","",3,"options","ngModel","ngModelChange"],["for","lastname"],["id","phone","type","text","formControlName","phoneNumber","pInputText","","required","",3,"ngModel","ngModelChange"],["class","p-col-12",4,"ngIf"],[1,"p-field","p-col-12"],["for","address"],["type","text","rows","4","formControlName","address","pInputTextarea","","required","",3,"ngModel","ngModelChange"],[1,"p-field","p-col-6"],["pButton","","type","button",1,"ui-button-raised",3,"label","disabled","click"],["pButton","","type","reset",1,"ui-button-raised",3,"label"],[1,"header-row"],[1,"body-row"],["pButton","","type","button",3,"label","click"],["severity","error","text","Name is required"],[1,"p-col-12"],["severity","error","text","phoneNumber number is required",4,"ngIf"],["severity","error","text","invalid phone number format please fill correct phone number format",4,"ngIf"],["severity","error","text","phoneNumber number is required"],["severity","error","text","invalid phone number format please fill correct phone number format"]],template:function(e,t){1&e&&(i.TgZ(0,"p-dialog",0),i.NdJ("visibleChange",function(e){return t.responseDialog=e}),i.TgZ(1,"p-header"),i.TgZ(2,"p"),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"p"),i._uU(5),i.qZA(),i.TgZ(6,"p-footer"),i.TgZ(7,"button",1),i.NdJ("click",function(){return t.Okonclick()}),i.ALo(8,"translate"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(9,"div",2),i.TgZ(10,"button",3),i.NdJ("click",function(){return t.register()}),i.ALo(11,"translate"),i.qZA(),i.qZA(),i.TgZ(12,"p-table",4),i.YNc(13,w,19,18,"ng-template",5),i.YNc(14,f,14,8,"ng-template",6),i.qZA(),i.TgZ(15,"p-dialog",7),i.NdJ("visibleChange",function(e){return t.display=e}),i.ALo(16,"translate"),i.TgZ(17,"form",8),i.NdJ("ngSubmit",function(){return t.onClickRegisterOwner()}),i.TgZ(18,"div",9),i.TgZ(19,"div",10),i.TgZ(20,"label",11),i._uU(21),i.ALo(22,"translate"),i.qZA(),i.TgZ(23,"input",12),i.NdJ("ngModelChange",function(e){return t.newOwner.name=e}),i.qZA(),i.YNc(24,q,1,0,"p-message",13),i.qZA(),i.TgZ(25,"div",10),i.TgZ(26,"label"),i._uU(27),i.ALo(28,"translate"),i.qZA(),i.TgZ(29,"p-dropdown",14),i.NdJ("ngModelChange",function(e){return t.selectedType=e}),i.qZA(),i.qZA(),i.TgZ(30,"div",10),i.TgZ(31,"label",15),i._uU(32),i.ALo(33,"translate"),i.qZA(),i.TgZ(34,"input",16),i.NdJ("ngModelChange",function(e){return t.newOwner.phone=e}),i.qZA(),i.qZA(),i.YNc(35,T,3,2,"div",17),i.TgZ(36,"div",18),i.TgZ(37,"label",19),i._uU(38),i.ALo(39,"translate"),i.qZA(),i.TgZ(40,"textarea",20),i.NdJ("ngModelChange",function(e){return t.newOwner.address=e}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(41,"div",9),i.TgZ(42,"div",21),i.TgZ(43,"button",22),i.NdJ("click",function(){return t.onClickRegisterOwner()}),i.ALo(44,"translate"),i.qZA(),i.qZA(),i.TgZ(45,"div",21),i._UZ(46,"button",23),i.ALo(47,"translate"),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.Akn(i.DdM(58,y)),i.Q6J("visible",t.responseDialog)("modal",!0),i.xp6(2),i.Tol(t.responseStyle),i.xp6(1),i.hij(" ",t.responseTitle," "),i.xp6(1),i.Tol(t.responseStyle),i.xp6(1),i.hij(" ",t.responseMesssage," "),i.xp6(2),i.s9C("label",i.lcZ(8,40,"ok")),i.xp6(3),i.s9C("label",i.lcZ(11,42,"register")),i.xp6(2),i.Q6J("value",t.owner)("paginator",!0)("rows",10)("autoLayout",!0)("loading",t.loading),i.xp6(3),i.Akn(i.DdM(59,O)),i.s9C("header",i.lcZ(16,44,t.dialogTitle)),i.Q6J("visible",t.display)("transitionOptions","0ms")("modal",!0),i.xp6(2),i.Q6J("formGroup",t.userform),i.xp6(4),i.Oqu(i.lcZ(22,46,"name")),i.xp6(2),i.Q6J("ngModel",t.newOwner.name),i.xp6(1),i.Q6J("ngIf",!t.userform.controls.name.valid&&t.userform.controls.name.dirty),i.xp6(3),i.Oqu(i.lcZ(28,48,"type")),i.xp6(2),i.Q6J("options",t.states)("ngModel",t.selectedType),i.xp6(3),i.Oqu(i.lcZ(33,50,"phone")),i.xp6(2),i.Q6J("ngModel",t.newOwner.phone),i.xp6(1),i.Q6J("ngIf",t.userform.controls.phoneNumber.errors&&t.userform.controls.phoneNumber.dirty&&t.userform.controls.phoneNumber.touched),i.xp6(3),i.Oqu(i.lcZ(39,52,"address")),i.xp6(2),i.Q6J("ngModel",t.newOwner.address),i.xp6(3),i.s9C("label",i.lcZ(44,54,"register")),i.Q6J("disabled",!t.userform.valid),i.xp6(3),i.s9C("label",i.lcZ(47,56,"reset")))},directives:[l.V,p.h4,p.$_,u.Hq,d.iA,p.jx,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,g.o,o.Q7,s.O5,c.Lt,h.g,m.q],pipes:[Z.X$],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[n.Bz.forChild(x)],n.Bz]}),e})();var N=r(35119);let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[s.ez,v,N.n]]}),e})()}}]);